
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Welcome to ElasticPyProxy’s documentation! &#8212; ElasticPyProxy 1.0 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="welcome-to-elasticpyproxy-s-documentation">
<h1>Welcome to ElasticPyProxy’s documentation!<a class="headerlink" href="#welcome-to-elasticpyproxy-s-documentation" title="Permalink to this headline">¶</a></h1>
<div class="section" id="elasticpyproxy-code-documentation">
<h2>ElasticPyProxy Code Documentation<a class="headerlink" href="#elasticpyproxy-code-documentation" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
</div>
</div>
<div class="section" id="module-src.driver.driver">
<span id="driver-main-entry-point-for-elasticpyproxy"></span><h2>driver (Main entry point for ElasticPyProxy)<a class="headerlink" href="#module-src.driver.driver" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-driver"></span><dl class="function">
<dt id="src.driver.driver.drive">
<code class="sig-prename descclassname">src.driver.driver.</code><code class="sig-name descname">drive</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/driver/driver.html#drive"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#src.driver.driver.drive" title="Permalink to this definition">¶</a></dt>
<dd><p><strong>Method for starting ep2</strong></p>
<p>This is the entry method which starts ep2 controller. It calls bootstrap module
for bootstrapping ep2, reads ep2 config, initialises haproxy and starts the
<strong>poll-update-repeat loop</strong></p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Returns nothing</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-src.driver.drivercache">
<span id="drivercache-cache-layer-for-ep2"></span><h2>drivercache : Cache layer for EP2<a class="headerlink" href="#module-src.driver.drivercache" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-drivercache"></span><dl class="class">
<dt id="src.driver.drivercache.DriverCache">
<em class="property">class </em><code class="sig-prename descclassname">src.driver.drivercache.</code><code class="sig-name descname">DriverCache</code><span class="sig-paren">(</span><em class="sig-param">node_ips</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/driver/drivercache.html#DriverCache"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#src.driver.drivercache.DriverCache" title="Permalink to this definition">¶</a></dt>
<dd><p>Class to provide caching for ep2</p>
<p>The backends fetched in a given run is stored in memory.
The backends fetched in next run witll be compared to the ones already
held by this class (node_ips). If there is a mismatch, only then update
will be done</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>node_ips</strong> (<em>list</em>) – list of backend IPs</p>
</dd>
</dl>
<dl class="method">
<dt id="src.driver.drivercache.DriverCache.need_to_update">
<code class="sig-name descname">need_to_update</code><span class="sig-paren">(</span><em class="sig-param">node_ips</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/driver/drivercache.html#DriverCache.need_to_update"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#src.driver.drivercache.DriverCache.need_to_update" title="Permalink to this definition">¶</a></dt>
<dd><p>Method to check if haproxy needs to be updated</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>node_ips</strong> (<em>list</em>) – list of backend IPs</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Whether to update haproxy or not</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-src.driver.bootstrap">
<span id="bootstrap-bootstrapper-for-ep2"></span><h2>bootstrap : Bootstrapper for ep2<a class="headerlink" href="#module-src.driver.bootstrap" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-bootstrap"></span><dl class="function">
<dt id="src.driver.bootstrap.bootstrap">
<code class="sig-prename descclassname">src.driver.bootstrap.</code><code class="sig-name descname">bootstrap</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/driver/bootstrap.html#bootstrap"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#src.driver.bootstrap.bootstrap" title="Permalink to this definition">¶</a></dt>
<dd><p>Method to bootstrap EP2 controller</p>
<p>This method bootstraps EP2 to creates the neccessary objects and returns it
to the driver.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>**kwargs</strong> (<em>object</em>) – kwargs must contains config dictionary, logger object.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Whether bootstrap updater was successfull or not
src.core.haproxyupdater.haproxyupdate.HaproxyUPdate: Object for updating haproxy config
src.core.nodefetchers.basefetcher: Object for fetching backends</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-src.core.haproxyupdater.haproxyupdate">
<span id="haproxyupdate-module-for-updating-haproxy"></span><h2>haproxyupdate : Module for updating haproxy<a class="headerlink" href="#module-src.core.haproxyupdater.haproxyupdate" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="src.core.haproxyupdater.haproxyupdate.HaproxyUpdate">
<em class="property">class </em><code class="sig-prename descclassname">src.core.haproxyupdater.haproxyupdate.</code><code class="sig-name descname">HaproxyUpdate</code><span class="sig-paren">(</span><em class="sig-param">**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/core/haproxyupdater/haproxyupdate.html#HaproxyUpdate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#src.core.haproxyupdater.haproxyupdate.HaproxyUpdate" title="Permalink to this definition">¶</a></dt>
<dd><p>Class for handling haproxy update and reload</p>
<p>This class contains handlers which controls haproxy uptation and reload.
Haproxy can be updated wither by updating its config file followed by
a reload via systemd or via binary. The other way to reload haproxy is
via the exposed socket. This type of update does not require any reload</p>
<p>For updating via runtime haproxy needs to maintain a pool if inactive
backends. When a new live backend comes, we can pull an inactive live backend
and make it live changing its ip to that of the live backend</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>**kwargs</strong> (<em>dictionary</em>) – params in key/value dict format</p>
</dd>
</dl>
<dl class="attribute">
<dt id="src.core.haproxyupdater.haproxyupdate.HaproxyUpdate.logger">
<code class="sig-name descname">logger</code><em class="property"> = None</em><a class="headerlink" href="#src.core.haproxyupdater.haproxyupdate.HaproxyUpdate.logger" title="Permalink to this definition">¶</a></dt>
<dd><p>Valid methods to start haproxy.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>init methods is not supported yet.</p>
</div>
</dd></dl>

<dl class="method">
<dt id="src.core.haproxyupdater.haproxyupdate.HaproxyUpdate.update_haproxy">
<code class="sig-name descname">update_haproxy</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/core/haproxyupdater/haproxyupdate.html#HaproxyUpdate.update_haproxy"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#src.core.haproxyupdater.haproxyupdate.HaproxyUpdate.update_haproxy" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates haproxy config</p>
<p>This method updates haproxy config with the help of the util methods.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>Wether haproxy was updated successfully or not.</p>
</dd>
<dt class="field-even">Return type</dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="src.core.haproxyupdater.haproxyupdate.HaproxyUpdate.update_haproxy_by_config_reload">
<code class="sig-name descname">update_haproxy_by_config_reload</code><span class="sig-paren">(</span><em class="sig-param">update_only=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/core/haproxyupdater/haproxyupdate.html#HaproxyUpdate.update_haproxy_by_config_reload"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#src.core.haproxyupdater.haproxyupdate.HaproxyUpdate.update_haproxy_by_config_reload" title="Permalink to this definition">¶</a></dt>
<dd><p>Method to update haproxy via config reload</p>
<p>This method will update haproxy via updating its config and subsequently reloading it.
The actual update will be done by the confighandler module and reload will be
done by haproxyreloader. Optinaly is <strong>upate_only</strong> is set to True then only config
will be updated and reload will not be done.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>update_only</strong> (<em>bool</em>) – Whether only update is required or both update and reload is required.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Wether successfully updated/reloaded as the case may be</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="src.core.haproxyupdater.haproxyupdate.HaproxyUpdate.update_node_list">
<code class="sig-name descname">update_node_list</code><span class="sig-paren">(</span><em class="sig-param">node_list</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/src/core/haproxyupdater/haproxyupdate.html#HaproxyUpdate.update_node_list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#src.core.haproxyupdater.haproxyupdate.HaproxyUpdate.update_node_list" title="Permalink to this definition">¶</a></dt>
<dd><p>Method to update active node list</p>
<p>This method will e called to update the list of active backends.
Haproxy needs to be updated and optionally reloaded if this list changes</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>node_list</strong> (<em>list</em>) – List containing IPs/Hostnames of active backends</p>
</dd>
</dl>
</dd></dl>

<dl class="attribute">
<dt id="src.core.haproxyupdater.haproxyupdate.HaproxyUpdate.valid_start_by">
<code class="sig-name descname">valid_start_by</code><em class="property"> = None</em><a class="headerlink" href="#src.core.haproxyupdater.haproxyupdate.HaproxyUpdate.valid_start_by" title="Permalink to this definition">¶</a></dt>
<dd><p>Valid methods to update haproxy</p>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="genindex.html"><span class="std std-ref">Index</span></a></p></li>
<li><p><a class="reference internal" href="py-modindex.html"><span class="std std-ref">Module Index</span></a></p></li>
<li><p><a class="reference internal" href="search.html"><span class="std std-ref">Search Page</span></a></p></li>
</ul>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="#">ElasticPyProxy</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="#">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2019, Deepjyoti Mondal.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.2.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/index.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>